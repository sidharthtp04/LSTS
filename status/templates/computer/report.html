{% extends 'computer/base.html' %}

{% block content %}
  <h1>Computers</h1>

  <form method="get">
    <label for="cpu">CPU Type:</label>
    <select name="cpu" id="cpu">
      <option value="">All</option>
      {% for cpu in cpu_types %}
        <option value="{{ cpu.cpu_id }}" {% if request.GET.cpu == cpu.cpu_id|stringformat:"s" %}selected{% endif %}>{{ cpu.cpu_make }}</option>
      {% endfor %}
    </select>

    <label for="cpu_make">CPU Make:</label>
    <select name="cpu_make" id="cpu_make">
      <option value="">All</option>
      {% for make in cpu_makes %}
        <option value="{{ make }}" {% if request.GET.cpu_make == make %}selected{% endif %}>{{ make }}</option>
      {% endfor %}
    </select>

    <label for="cpu_series">CPU Series:</label>
    <select name="cpu_series" id="cpu_series">
      <option value="">All</option>
      {% for series in cpu_series %}
        <option value="{{ series }}" {% if request.GET.cpu_series == series %}selected{% endif %}>{{ series }}</option>
      {% endfor %}
    </select>

    <!-- Add similar dropdowns for CPU generation, motherboard capacity, make, brand, etc. -->

    <label for="status">Status:</label>
    <select name="status" id="status">
      <option value="">All</option>
      {% for status in statuses %}
        <option value="{{ status }}" {% if request.GET.status == status %}selected{% endif %}>{{ status }}</option>
      {% endfor %}
    </select>

    <button type="submit">Filter</button>
  </form>

  <table>
    <thead>
      <tr>
        <th>C_Label</th>
                <th>LAB</th>
                <th>Date of Purchase</th>
                <th>CPU</th>
                <th>Motherboard</th>
                <th>Ram</th>
                <th>Storage</th>
                <th>SMPS</th>
                <th>Keyboard</th>
                <th>Mouse</th>
                <th>Monitor</th>
                <th>Status</th>
                <th>invoice No.</th>
                <th>OS Type</th>
      </tr>
    </thead>
    <tbody>
      {% for computer in details %}
          <tr>
              
              <td>{{ computer.c_label }}</td>
              <td>{{ computer.lab.lab_name }}</td>
              <td>{{ computer.dop }}</td>
              <td>{{ computer.cpu.make }} {{ computer.cpu.series }}-{{ computer.cpu.generation }} Gen CPU @ {{ computer.cpu.speed }} x {{ computer.cpu.core_count }}</td>
              <td>{{ computer.mb.mb_socket_type }} {{ computer.mb.max_ram_capacity }} {{ computer.mb.make }} {{ computer.mb.brand }}</td>
              <td>{{ computer.ram.ram_size }} {{ computer.ram.make }} {{ computer.ram.speed }} {{ computer.ram.series }}</td>
              <td>{{ computer.storage.storage_size }} {{ computer.storage.make }} {{ computer.storage.technology }}</td>
              <td>{{ computer.smps.make }} {{ computer.smps.power }}W</td>
              <td>{{ computer.keyboard.make }}</td>
              <td>{{ computer.mouse.make }}</td>
              <td>{{ computer.monitor.make }}</td>
              <td>{{ computer.status}}</td>
              <td>{{ computer.invoice_no }}</td>
              <td>{{ computer.os_type }}</td>
              
          </tr>
      {% endfor %}
  </tbody>
  </table>
{% endblock %}
